// Version 1.36.1 three-forcegraph - https://github.com/vasturiano/three-forcegraph
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("three")):"function"==typeof define&&define.amd?define(["three"],e):(t=t||self).ThreeForceGraph=e(t.THREE)}(this,(function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t,e,n){return(l=f()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&s(o,n.prototype),o}).apply(null,arguments)}function c(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?h(t):e}function p(t){var e=f();return function(){var n,r=u(t);if(e){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e,n){var r;function o(){var o,i,a=r.length,u=0,s=0,f=0;for(o=0;o<a;++o)u+=(i=r[o]).x||0,s+=i.y||0,f+=i.z||0;for(u=u/a-t,s=s/a-e,f=f/a-n,o=0;o<a;++o)i=r[o],u&&(i.x-=u),s&&(i.y-=s),f&&(i.z-=f)}return null==t&&(t=0),null==e&&(e=0),null==n&&(n=0),o.initialize=function(t){r=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.z=function(t){return arguments.length?(n=+t,o):n},o}function x(t,e,n){if(isNaN(e))return t;var r,o,i,a,u,s,f=t._root,l={data:n},c=t._x0,h=t._x1;if(!f)return t._root=l,t;for(;f.length;)if((a=e>=(o=(c+h)/2))?c=o:h=o,r=f,!(f=f[u=+a]))return r[u]=l,t;if(e===(i=+t._x.call(null,f.data)))return l.next=f,r?r[u]=l:t._root=l,t;do{r=r?r[u]=new Array(2):t._root=new Array(2),(a=e>=(o=(c+h)/2))?c=o:h=o}while((u=+a)==(s=+(i>=o)));return r[s]=f,r[u]=l,t}function _(t,e,n){this.node=t,this.x0=e,this.x1=n}function w(t){return t[0]}function k(t,e){var n=new A(null==e?w:e,NaN,NaN);return null==t?n:n.addAll(t)}function A(t,e,n){this._x=t,this._x0=e,this._x1=n,this._root=void 0}function O(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var M=k.prototype=A.prototype;function j(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var o,i,a,u,s,f,l,c,h,d=t._root,p={data:r},g=t._x0,y=t._y0,v=t._x1,b=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((f=e>=(i=(g+v)/2))?g=i:v=i,(l=n>=(a=(y+b)/2))?y=a:b=a,o=d,!(d=d[c=l<<1|f]))return o[c]=p,t;if(u=+t._x.call(null,d.data),s=+t._y.call(null,d.data),e===u&&n===s)return p.next=d,o?o[c]=p:t._root=p,t;do{o=o?o[c]=new Array(4):t._root=new Array(4),(f=e>=(i=(g+v)/2))?g=i:v=i,(l=n>=(a=(y+b)/2))?y=a:b=a}while((c=l<<1|f)==(h=(s>=a)<<1|u>=i));return o[h]=d,o[c]=p,t}function z(t,e,n,r,o){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=o}function N(t){return t[0]}function P(t){return t[1]}function E(t,e,n){var r=new q(null==e?N:e,null==n?P:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function q(t,e,n,r,o,i){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function S(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}M.copy=function(){var t,e,n=new A(this._x,this._x0,this._x1),r=this._root;if(!r)return n;if(!r.length)return n._root=O(r),n;for(t=[{source:r,target:n._root=new Array(2)}];r=t.pop();)for(var o=0;o<2;++o)(e=r.source[o])&&(e.length?t.push({source:e,target:r.target[o]=new Array(2)}):r.target[o]=O(e));return n},M.add=function(t){var e=+this._x.call(null,t);return x(this.cover(e),e,t)},M.addAll=function(t){var e,n,r=t.length,o=new Array(r),i=1/0,a=-1/0;for(e=0;e<r;++e)isNaN(n=+this._x.call(null,t[e]))||(o[e]=n,n<i&&(i=n),n>a&&(a=n));for(a<i&&(i=this._x0,a=this._x1),this.cover(i).cover(a),e=0;e<r;++e)x(this,o[e],t[e]);return this},M.cover=function(t){if(isNaN(t=+t))return this;var e=this._x0,n=this._x1;if(isNaN(e))n=(e=Math.floor(t))+1;else{if(!(e>t||t>n))return this;var r,o,i=n-e,a=this._root;switch(o=+(t<(e+n)/2)){case 0:do{(r=new Array(2))[o]=a,a=r}while(t>(n=e+(i*=2)));break;case 1:do{(r=new Array(2))[o]=a,a=r}while((e=n-(i*=2))>t)}this._root&&this._root.length&&(this._root=a)}return this._x0=e,this._x1=n,this},M.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},M.extent=function(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},M.find=function(t,e){var n,r,o,i,a,u=this._x0,s=this._x1,f=[],l=this._root;for(l&&f.push(new _(l,u,s)),null==e?e=1/0:(u=t-e,s=t+e);i=f.pop();)if(!(!(l=i.node)||(r=i.x0)>s||(o=i.x1)<u))if(l.length){var c=(r+o)/2;f.push(new _(l[1],c,o),new _(l[0],r,c)),(a=+(t>=c))&&(i=f[f.length-1],f[f.length-1]=f[f.length-1-a],f[f.length-1-a]=i)}else{var h=Math.abs(t-+this._x.call(null,l.data));h<e&&(e=h,u=t-h,s=t+h,n=l.data)}return n},M.remove=function(t){if(isNaN(i=+this._x.call(null,t)))return this;var e,n,r,o,i,a,u,s,f,l=this._root,c=this._x0,h=this._x1;if(!l)return this;if(l.length)for(;;){if((u=i>=(a=(c+h)/2))?c=a:h=a,e=l,!(l=l[s=+u]))return this;if(!l.length)break;e[s+1&1]&&(n=e,f=s)}for(;l.data!==t;)if(r=l,!(l=l.next))return this;return(o=l.next)&&delete l.next,r?(o?r.next=o:delete r.next,this):e?(o?e[s]=o:delete e[s],(l=e[0]||e[1])&&l===(e[1]||e[0])&&!l.length&&(n?n[f]=l:this._root=l),this):(this._root=o,this)},M.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},M.root=function(){return this._root},M.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},M.visit=function(t){var e,n,r,o,i=[],a=this._root;for(a&&i.push(new _(a,this._x0,this._x1));e=i.pop();)if(!t(a=e.node,r=e.x0,o=e.x1)&&a.length){var u=(r+o)/2;(n=a[1])&&i.push(new _(n,u,o)),(n=a[0])&&i.push(new _(n,r,u))}return this},M.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new _(this._root,this._x0,this._x1));e=n.pop();){var o=e.node;if(o.length){var i,a=e.x0,u=e.x1,s=(a+u)/2;(i=o[0])&&n.push(new _(i,a,s)),(i=o[1])&&n.push(new _(i,s,u))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.x1);return this},M.x=function(t){return arguments.length?(this._x=t,this):this._x};var D=E.prototype=q.prototype;function C(t,e,n,r,o){if(isNaN(e)||isNaN(n)||isNaN(r))return t;var i,a,u,s,f,l,c,h,d,p,g,y,v=t._root,b={data:o},m=t._x0,x=t._y0,_=t._z0,w=t._x1,k=t._y1,A=t._z1;if(!v)return t._root=b,t;for(;v.length;)if((h=e>=(a=(m+w)/2))?m=a:w=a,(d=n>=(u=(x+k)/2))?x=u:k=u,(p=r>=(s=(_+A)/2))?_=s:A=s,i=v,!(v=v[g=p<<2|d<<1|h]))return i[g]=b,t;if(f=+t._x.call(null,v.data),l=+t._y.call(null,v.data),c=+t._z.call(null,v.data),e===f&&n===l&&r===c)return b.next=v,i?i[g]=b:t._root=b,t;do{i=i?i[g]=new Array(8):t._root=new Array(8),(h=e>=(a=(m+w)/2))?m=a:w=a,(d=n>=(u=(x+k)/2))?x=u:k=u,(p=r>=(s=(_+A)/2))?_=s:A=s}while((g=p<<2|d<<1|h)==(y=(c>=s)<<2|(l>=u)<<1|f>=a));return i[y]=v,i[g]=b,t}function T(t,e,n,r,o,i,a){this.node=t,this.x0=e,this.y0=n,this.z0=r,this.x1=o,this.y1=i,this.z1=a}function L(t){return t[0]}function B(t){return t[1]}function I(t){return t[2]}function R(t,e,n,r){var o=new F(null==e?L:e,null==n?B:n,null==r?I:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==t?o:o.addAll(t)}function F(t,e,n,r,o,i,a,u,s){this._x=t,this._y=e,this._z=n,this._x0=r,this._y0=o,this._z0=i,this._x1=a,this._y1=u,this._z1=s,this._root=void 0}function U(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}D.copy=function(){var t,e,n=new q(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=S(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var o=0;o<4;++o)(e=r.source[o])&&(e.length?t.push({source:e,target:r.target[o]=new Array(4)}):r.target[o]=S(e));return n},D.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return j(this.cover(e,n),e,n,t)},D.addAll=function(t){var e,n,r,o,i=t.length,a=new Array(i),u=new Array(i),s=1/0,f=1/0,l=-1/0,c=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=r,u[n]=o,r<s&&(s=r),r>l&&(l=r),o<f&&(f=o),o>c&&(c=o));if(s>l||f>c)return this;for(this.cover(s,f).cover(l,c),n=0;n<i;++n)j(this,a[n],u[n],t[n]);return this},D.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,i=(r=Math.floor(e))+1;else{for(var a,u,s=o-n,f=this._root;n>t||t>=o||r>e||e>=i;)switch(u=(e<r)<<1|t<n,(a=new Array(4))[u]=f,f=a,s*=2,u){case 0:o=n+s,i=r+s;break;case 1:n=o-s,i=r+s;break;case 2:o=n+s,r=i-s;break;case 3:n=o-s,r=i-s}this._root&&this._root.length&&(this._root=f)}return this._x0=n,this._y0=r,this._x1=o,this._y1=i,this},D.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},D.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},D.find=function(t,e,n){var r,o,i,a,u,s,f,l=this._x0,c=this._y0,h=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new z(g,l,c,h,d)),null==n?n=1/0:(l=t-n,c=e-n,h=t+n,d=e+n,n*=n);s=p.pop();)if(!(!(g=s.node)||(o=s.x0)>h||(i=s.y0)>d||(a=s.x1)<l||(u=s.y1)<c))if(g.length){var y=(o+a)/2,v=(i+u)/2;p.push(new z(g[3],y,v,a,u),new z(g[2],o,v,y,u),new z(g[1],y,i,a,v),new z(g[0],o,i,y,v)),(f=(e>=v)<<1|t>=y)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-f],p[p.length-1-f]=s)}else{var b=t-+this._x.call(null,g.data),m=e-+this._y.call(null,g.data),x=b*b+m*m;if(x<n){var _=Math.sqrt(n=x);l=t-_,c=e-_,h=t+_,d=e+_,r=g.data}}return r},D.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,o,i,a,u,s,f,l,c,h,d=this._root,p=this._x0,g=this._y0,y=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((f=i>=(u=(p+y)/2))?p=u:y=u,(l=a>=(s=(g+v)/2))?g=s:v=s,e=d,!(d=d[c=l<<1|f]))return this;if(!d.length)break;(e[c+1&3]||e[c+2&3]||e[c+3&3])&&(n=e,h=c)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(o=d.next)&&delete d.next,r?(o?r.next=o:delete r.next,this):e?(o?e[c]=o:delete e[c],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=o,this)},D.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},D.root=function(){return this._root},D.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},D.visit=function(t){var e,n,r,o,i,a,u=[],s=this._root;for(s&&u.push(new z(s,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(s=e.node,r=e.x0,o=e.y0,i=e.x1,a=e.y1)&&s.length){var f=(r+i)/2,l=(o+a)/2;(n=s[3])&&u.push(new z(n,f,l,i,a)),(n=s[2])&&u.push(new z(n,r,l,f,a)),(n=s[1])&&u.push(new z(n,f,o,i,l)),(n=s[0])&&u.push(new z(n,r,o,f,l))}return this},D.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new z(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var i,a=e.x0,u=e.y0,s=e.x1,f=e.y1,l=(a+s)/2,c=(u+f)/2;(i=o[0])&&n.push(new z(i,a,u,l,c)),(i=o[1])&&n.push(new z(i,l,u,s,c)),(i=o[2])&&n.push(new z(i,a,c,l,f)),(i=o[3])&&n.push(new z(i,l,c,s,f))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},D.x=function(t){return arguments.length?(this._x=t,this):this._x},D.y=function(t){return arguments.length?(this._y=t,this):this._y};var V=R.prototype=F.prototype;function H(t){return function(){return t}}function G(){return 1e-6*(Math.random()-.5)}function X(t){return t.index}function W(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Y(t){var e,n,r,o,i,a,u=X,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},f=H(30),l=1;function c(r){for(var i=0,u=t.length;i<l;++i)for(var s,f,c,h,d,p=0,g=0,y=0,v=0;p<u;++p)f=(s=t[p]).source,g=(c=s.target).x+c.vx-f.x-f.vx||G(),o>1&&(y=c.y+c.vy-f.y-f.vy||G()),o>2&&(v=c.z+c.vz-f.z-f.vz||G()),g*=h=((h=Math.sqrt(g*g+y*y+v*v))-n[p])/h*r*e[p],y*=h,v*=h,c.vx-=g*(d=a[p]),o>1&&(c.vy-=y*d),o>2&&(c.vz-=v*d),f.vx+=g*(d=1-d),o>1&&(f.vy+=y*d),o>2&&(f.vz+=v*d)}function h(){if(r){var o,s,f=r.length,l=t.length,c=new Map(r.map((t,e)=>[u(t,e,r),t]));for(o=0,i=new Array(f);o<l;++o)(s=t[o]).index=o,"object"!=typeof s.source&&(s.source=W(c,s.source)),"object"!=typeof s.target&&(s.target=W(c,s.target)),i[s.source.index]=(i[s.source.index]||0)+1,i[s.target.index]=(i[s.target.index]||0)+1;for(o=0,a=new Array(l);o<l;++o)s=t[o],a[o]=i[s.source.index]/(i[s.source.index]+i[s.target.index]);e=new Array(l),d(),n=new Array(l),p()}}function d(){if(r)for(var n=0,o=t.length;n<o;++n)e[n]=+s(t[n],n,t)}function p(){if(r)for(var e=0,o=t.length;e<o;++e)n[e]=+f(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t,e){r=t,o=e,h()},c.links=function(e){return arguments.length?(t=e,h(),c):t},c.id=function(t){return arguments.length?(u=t,c):u},c.iterations=function(t){return arguments.length?(l=+t,c):l},c.strength=function(t){return arguments.length?(s="function"==typeof t?t:H(+t),d(),c):s},c.distance=function(t){return arguments.length?(f="function"==typeof t?t:H(+t),p(),c):f},c}V.copy=function(){var t,e,n=new F(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(!r)return n;if(!r.length)return n._root=U(r),n;for(t=[{source:r,target:n._root=new Array(8)}];r=t.pop();)for(var o=0;o<8;++o)(e=r.source[o])&&(e.length?t.push({source:e,target:r.target[o]=new Array(8)}):r.target[o]=U(e));return n},V.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t),r=+this._z.call(null,t);return C(this.cover(e,n,r),e,n,r,t)},V.addAll=function(t){var e,n,r,o,i,a=t.length,u=new Array(a),s=new Array(a),f=new Array(a),l=1/0,c=1/0,h=1/0,d=-1/0,p=-1/0,g=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||isNaN(i=+this._z.call(null,e))||(u[n]=r,s[n]=o,f[n]=i,r<l&&(l=r),r>d&&(d=r),o<c&&(c=o),o>p&&(p=o),i<h&&(h=i),i>g&&(g=i));for(d<l&&(l=this._x0,d=this._x1),p<c&&(c=this._y0,p=this._y1),g<h&&(h=this._z0,g=this._z1),this.cover(l,c,h).cover(d,p,g),n=0;n<a;++n)C(this,u[n],s[n],f[n],t[n]);return this},V.cover=function(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,o=this._y0,i=this._z0,a=this._x1,u=this._y1,s=this._z1;if(isNaN(r))a=(r=Math.floor(t))+1,u=(o=Math.floor(e))+1,s=(i=Math.floor(n))+1;else{if(!(r>t||t>a||o>e||e>u||i>n||n>s))return this;var f,l,c=a-r,h=this._root;switch(l=(n<(i+s)/2)<<2|(e<(o+u)/2)<<1|t<(r+a)/2){case 0:do{(f=new Array(8))[l]=h,h=f}while(u=o+(c*=2),s=i+c,t>(a=r+c)||e>u||n>s);break;case 1:do{(f=new Array(8))[l]=h,h=f}while(u=o+(c*=2),s=i+c,(r=a-c)>t||e>u||n>s);break;case 2:do{(f=new Array(8))[l]=h,h=f}while(o=u-(c*=2),s=i+c,t>(a=r+c)||o>e||n>s);break;case 3:do{(f=new Array(8))[l]=h,h=f}while(o=u-(c*=2),s=i+c,(r=a-c)>t||o>e||n>s);break;case 4:do{(f=new Array(8))[l]=h,h=f}while(u=o+(c*=2),i=s-c,t>(a=r+c)||e>u||i>n);break;case 5:do{(f=new Array(8))[l]=h,h=f}while(u=o+(c*=2),i=s-c,(r=a-c)>t||e>u||i>n);break;case 6:do{(f=new Array(8))[l]=h,h=f}while(o=u-(c*=2),i=s-c,t>(a=r+c)||o>e||i>n);break;case 7:do{(f=new Array(8))[l]=h,h=f}while(o=u-(c*=2),i=s-c,(r=a-c)>t||o>e||i>n)}this._root&&this._root.length&&(this._root=h)}return this._x0=r,this._y0=o,this._z0=i,this._x1=a,this._y1=u,this._z1=s,this},V.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},V.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},V.find=function(t,e,n,r){var o,i,a,u,s,f,l,c,h,d=this._x0,p=this._y0,g=this._z0,y=this._x1,v=this._y1,b=this._z1,m=[],x=this._root;for(x&&m.push(new T(x,d,p,g,y,v,b)),null==r?r=1/0:(d=t-r,p=e-r,g=n-r,y=t+r,v=e+r,b=n+r,r*=r);c=m.pop();)if(!(!(x=c.node)||(i=c.x0)>y||(a=c.y0)>v||(u=c.z0)>b||(s=c.x1)<d||(f=c.y1)<p||(l=c.z1)<g))if(x.length){var _=(i+s)/2,w=(a+f)/2,k=(u+l)/2;m.push(new T(x[7],_,w,k,s,f,l),new T(x[6],i,w,k,_,f,l),new T(x[5],_,a,k,s,w,l),new T(x[4],i,a,k,_,w,l),new T(x[3],_,w,u,s,f,k),new T(x[2],i,w,u,_,f,k),new T(x[1],_,a,u,s,w,k),new T(x[0],i,a,u,_,w,k)),(h=(n>=k)<<2|(e>=w)<<1|t>=_)&&(c=m[m.length-1],m[m.length-1]=m[m.length-1-h],m[m.length-1-h]=c)}else{var A=t-+this._x.call(null,x.data),O=e-+this._y.call(null,x.data),M=n-+this._z.call(null,x.data),j=A*A+O*O+M*M;if(j<r){var z=Math.sqrt(r=j);d=t-z,p=e-z,g=n-z,y=t+z,v=e+z,b=n+z,o=x.data}}return o},V.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t))||isNaN(u=+this._z.call(null,t)))return this;var e,n,r,o,i,a,u,s,f,l,c,h,d,p,g,y=this._root,v=this._x0,b=this._y0,m=this._z0,x=this._x1,_=this._y1,w=this._z1;if(!y)return this;if(y.length)for(;;){if((c=i>=(s=(v+x)/2))?v=s:x=s,(h=a>=(f=(b+_)/2))?b=f:_=f,(d=u>=(l=(m+w)/2))?m=l:w=l,e=y,!(y=y[p=d<<2|h<<1|c]))return this;if(!y.length)break;(e[p+1&7]||e[p+2&7]||e[p+3&7]||e[p+4&7]||e[p+5&7]||e[p+6&7]||e[p+7&7])&&(n=e,g=p)}for(;y.data!==t;)if(r=y,!(y=y.next))return this;return(o=y.next)&&delete y.next,r?(o?r.next=o:delete r.next,this):e?(o?e[p]=o:delete e[p],(y=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&y===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!y.length&&(n?n[g]=y:this._root=y),this):(this._root=o,this)},V.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},V.root=function(){return this._root},V.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},V.visit=function(t){var e,n,r,o,i,a,u,s,f=[],l=this._root;for(l&&f.push(new T(l,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=f.pop();)if(!t(l=e.node,r=e.x0,o=e.y0,i=e.z0,a=e.x1,u=e.y1,s=e.z1)&&l.length){var c=(r+a)/2,h=(o+u)/2,d=(i+s)/2;(n=l[7])&&f.push(new T(n,c,h,d,a,u,s)),(n=l[6])&&f.push(new T(n,r,h,d,c,u,s)),(n=l[5])&&f.push(new T(n,c,o,d,a,h,s)),(n=l[4])&&f.push(new T(n,r,o,d,c,h,s)),(n=l[3])&&f.push(new T(n,c,h,i,a,u,d)),(n=l[2])&&f.push(new T(n,r,h,i,c,u,d)),(n=l[1])&&f.push(new T(n,c,o,i,a,h,d)),(n=l[0])&&f.push(new T(n,r,o,i,c,h,d))}return this},V.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new T(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=n.pop();){var o=e.node;if(o.length){var i,a=e.x0,u=e.y0,s=e.z0,f=e.x1,l=e.y1,c=e.z1,h=(a+f)/2,d=(u+l)/2,p=(s+c)/2;(i=o[0])&&n.push(new T(i,a,u,s,h,d,p)),(i=o[1])&&n.push(new T(i,h,u,s,f,d,p)),(i=o[2])&&n.push(new T(i,a,d,s,h,l,p)),(i=o[3])&&n.push(new T(i,h,d,s,f,l,p)),(i=o[4])&&n.push(new T(i,a,u,p,h,d,c)),(i=o[5])&&n.push(new T(i,h,u,p,f,d,c)),(i=o[6])&&n.push(new T(i,a,d,p,h,l,c)),(i=o[7])&&n.push(new T(i,h,d,p,f,l,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.z0,e.x1,e.y1,e.z1);return this},V.x=function(t){return arguments.length?(this._x=t,this):this._x},V.y=function(t){return arguments.length?(this._y=t,this):this._y},V.z=function(t){return arguments.length?(this._z=t,this):this._z};var $={value:function(){}};function Q(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Z(r)}function Z(t){this._=t}function J(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function K(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function tt(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=$,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Z.prototype=Q.prototype={constructor:Z,on:function(t,e){var n,r=this._,o=J(t+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<a;)if(n=(t=o[i]).type)r[n]=tt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=tt(r[n],t.name,null);return this}for(;++i<a;)if((n=(t=o[i]).type)&&(n=K(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Z(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};var et,nt,rt=0,ot=0,it=0,at=0,ut=0,st=0,ft="object"==typeof performance&&performance.now?performance:Date,lt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ct(){return ut||(lt(ht),ut=ft.now()+st)}function ht(){ut=0}function dt(){this._call=this._time=this._next=null}function pt(t,e,n){var r=new dt;return r.restart(t,e,n),r}function gt(){ut=(at=ft.now())+st,rt=ot=0;try{!function(){ct(),++rt;for(var t,e=et;e;)(t=ut-e._time)>=0&&e._call.call(null,t),e=e._next;--rt}()}finally{rt=0,function(){var t,e,n=et,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:et=e);nt=t,vt(r)}(),ut=0}}function yt(){var t=ft.now(),e=t-at;e>1e3&&(st-=e,at=t)}function vt(t){rt||(ot&&(ot=clearTimeout(ot)),t-ut>24?(t<1/0&&(ot=setTimeout(gt,t-ft.now()-st)),it&&(it=clearInterval(it))):(it||(at=ft.now(),it=setInterval(yt,1e3)),rt=1,lt(gt)))}dt.prototype=pt.prototype={constructor:dt,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ct():+n)+(null==e?0:+e),this._next||nt===this||(nt?nt._next=this:et=this,nt=this),this._call=t,this._time=n,vt()},stop:function(){this._call&&(this._call=null,this._time=1/0,vt())}};function bt(t){return t.x}function mt(t){return t.y}function xt(t){return t.z}var _t=Math.PI*(3-Math.sqrt(5)),wt=20*Math.PI/(9+Math.sqrt(221));function kt(t,e){e=e||2;var n,r=Math.min(3,Math.max(1,Math.round(e))),o=1,i=.001,a=1-Math.pow(i,1/300),u=0,s=.6,f=new Map,l=pt(h),c=Q("tick","end");function h(){d(),c.call("tick",n),o<i&&(l.stop(),c.call("end",n))}function d(e){var i,l,c=t.length;void 0===e&&(e=1);for(var h=0;h<e;++h)for(o+=(u-o)*a,f.forEach((function(t){t(o)})),i=0;i<c;++i)null==(l=t[i]).fx?l.x+=l.vx*=s:(l.x=l.fx,l.vx=0),r>1&&(null==l.fy?l.y+=l.vy*=s:(l.y=l.fy,l.vy=0)),r>2&&(null==l.fz?l.z+=l.vz*=s:(l.z=l.fz,l.vz=0));return n}function p(){for(var e,n=0,o=t.length;n<o;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),null!=e.fz&&(e.z=e.fz),isNaN(e.x)||r>1&&isNaN(e.y)||r>2&&isNaN(e.z)){var i=10*(r>2?Math.cbrt(n):r>1?Math.sqrt(n):n),a=n*_t,u=n*wt;1===r?e.x=i:2===r?(e.x=i*Math.cos(a),e.y=i*Math.sin(a)):(e.x=i*Math.sin(a)*Math.cos(u),e.y=i*Math.cos(a),e.z=i*Math.sin(a)*Math.sin(u))}(isNaN(e.vx)||r>1&&isNaN(e.vy)||r>2&&isNaN(e.vz))&&(e.vx=0,r>1&&(e.vy=0),r>2&&(e.vz=0))}}function g(e){return e.initialize&&e.initialize(t,r),e}return null==t&&(t=[]),p(),n={tick:d,restart:function(){return l.restart(h),n},stop:function(){return l.stop(),n},numDimensions:function(t){return arguments.length?(r=Math.min(3,Math.max(1,Math.round(t))),f.forEach(g),n):r},nodes:function(e){return arguments.length?(t=e,p(),f.forEach(g),n):t},alpha:function(t){return arguments.length?(o=+t,n):o},alphaMin:function(t){return arguments.length?(i=+t,n):i},alphaDecay:function(t){return arguments.length?(a=+t,n):+a},alphaTarget:function(t){return arguments.length?(u=+t,n):u},velocityDecay:function(t){return arguments.length?(s=1-t,n):1-s},force:function(t,e){return arguments.length>1?(null==e?f.delete(t):f.set(t,g(e)),n):f.get(t)},find:function(){var e,n,o,i,a,u,s=Array.prototype.slice.call(arguments),f=s.shift()||0,l=(r>1?s.shift():null)||0,c=(r>2?s.shift():null)||0,h=s.shift()||1/0,d=0,p=t.length;for(h*=h,d=0;d<p;++d)(i=(e=f-(a=t[d]).x)*e+(n=l-(a.y||0))*n+(o=c-(a.z||0))*o)<h&&(u=a,h=i);return u},on:function(t,e){return arguments.length>1?(c.on(t,e),n):c.on(t)}}}function At(){var t,e,n,r,o,i=H(-30),a=1,u=1/0,s=.81;function f(o){var i,a=t.length,u=(1===e?k(t,bt):2===e?E(t,bt,mt):3===e?R(t,bt,mt,xt):null).visitAfter(c);for(r=o,i=0;i<a;++i)n=t[i],u.visit(h)}function l(){if(t){var e,n,r=t.length;for(o=new Array(r),e=0;e<r;++e)n=t[e],o[n.index]=+i(n,e,t)}}function c(t){var n,r,i,a,u,s,f=0,l=0,c=t.length;if(c){for(i=a=u=s=0;s<c;++s)(n=t[s])&&(r=Math.abs(n.value))&&(f+=n.value,l+=r,i+=r*(n.x||0),a+=r*(n.y||0),u+=r*(n.z||0));f*=Math.sqrt(4/c),t.x=i/l,e>1&&(t.y=a/l),e>2&&(t.z=u/l)}else{(n=t).x=n.data.x,e>1&&(n.y=n.data.y),e>2&&(n.z=n.data.z);do{f+=o[n.data.index]}while(n=n.next)}t.value=f}function h(t,i,f,l,c){if(!t.value)return!0;var h=[f,l,c][e-1],d=t.x-n.x,p=e>1?t.y-n.y:0,g=e>2?t.z-n.z:0,y=h-i,v=d*d+p*p+g*g;if(y*y/s<v)return v<u&&(0===d&&(v+=(d=G())*d),e>1&&0===p&&(v+=(p=G())*p),e>2&&0===g&&(v+=(g=G())*g),v<a&&(v=Math.sqrt(a*v)),n.vx+=d*t.value*r/v,e>1&&(n.vy+=p*t.value*r/v),e>2&&(n.vz+=g*t.value*r/v)),!0;if(!(t.length||v>=u)){(t.data!==n||t.next)&&(0===d&&(v+=(d=G())*d),e>1&&0===p&&(v+=(p=G())*p),e>2&&0===g&&(v+=(g=G())*g),v<a&&(v=Math.sqrt(a*v)));do{t.data!==n&&(y=o[t.data.index]*r/v,n.vx+=d*y,e>1&&(n.vy+=p*y),e>2&&(n.vz+=g*y))}while(t=t.next)}}return f.initialize=function(n,r){t=n,e=r,l()},f.strength=function(t){return arguments.length?(i="function"==typeof t?t:H(+t),l(),f):i},f.distanceMin=function(t){return arguments.length?(a=t*t,f):Math.sqrt(a)},f.distanceMax=function(t){return arguments.length?(u=t*t,f):Math.sqrt(u)},f.theta=function(t){return arguments.length?(s=t*t,f):Math.sqrt(s)},f}var Ot=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(n,r,o){if("function"!=typeof r)throw new Error("callback is expected to be a function");var i=e[n];return i||(i=e[n]=[]),i.push({callback:r,ctx:o}),t},off:function(n,r){if(void 0===n)return e=Object.create(null),t;if(e[n])if("function"!=typeof r)delete e[n];else for(var o=e[n],i=0;i<o.length;++i)o[i].callback===r&&o.splice(i,1);return t},fire:function(n){var r,o=e[n];if(!o)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var i=0;i<o.length;++i){var a=o[i];a.callback.apply(a.ctx,r)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t};var Mt=function(t){"uniqueLinkId"in(t=t||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),t.multigraph=t.uniqueLinkId);void 0===t.multigraph&&(t.multigraph=!1);if("function"!=typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,n=[],r={},o=0,i=t.multigraph?function(t,e,n){var o=Et(t,e),i=r.hasOwnProperty(o);if(i||x(t,e)){i||(r[o]=0);var a="@"+ ++r[o];o=Et(t+a,e+a)}return new Pt(t,e,n,o)}:function(t,e,n){var r=Et(t,e);return new Pt(t,e,n,r)},a=[],u=_,s=_,f=_,l=_,c={addNode:p,addLink:function(t,e,r){f();var o=g(t)||p(t),a=g(e)||p(e),s=i(t,e,r);n.push(s),Nt(o,s),t!==e&&Nt(a,s);return u(s,"add"),l(),s},removeLink:m,removeNode:y,getNode:g,getNodeCount:v,getLinkCount:b,getLinksCount:b,getNodesCount:v,getLinks:function(t){var e=g(t);return e?e.links:null},forEachNode:A,forEachLinkedNode:function(t,n,r){var o=g(t);if(o&&o.links&&"function"==typeof n)return r?function(t,n,r){for(var o=0;o<t.length;++o){var i=t[o];if(i.fromId===n&&r(e.get(i.toId),i))return!0}}(o.links,t,n):function(t,n,r){for(var o=0;o<t.length;++o){var i=t[o],a=i.fromId===n?i.toId:i.fromId;if(r(e.get(a),i))return!0}}(o.links,t,n)},forEachLink:function(t){var e,r;if("function"==typeof t)for(e=0,r=n.length;e<r;++e)t(n[e])},beginUpdate:f,endUpdate:l,clear:function(){f(),A((function(t){y(t.id)})),l()},hasLink:x,hasNode:g,getLink:x};return Ot(c),function(){var t=c.on;c.on=function(){return c.beginUpdate=f=w,c.endUpdate=l=k,u=h,s=d,c.on=t,t.apply(c,arguments)}}(),c;function h(t,e){a.push({link:t,changeType:e})}function d(t,e){a.push({node:t,changeType:e})}function p(t,n){if(void 0===t)throw new Error("Invalid node identifier");f();var r=g(t);return r?(r.data=n,s(r,"update")):(r=new zt(t,n),s(r,"add")),e.set(t,r),l(),r}function g(t){return e.get(t)}function y(t){var n=g(t);if(!n)return!1;f();var r=n.links;if(r){n.links=null;for(var o=0;o<r.length;++o)m(r[o])}return e.delete(t),s(n,"remove"),l(),!0}function v(){return e.size}function b(){return n.length}function m(t){if(!t)return!1;var e=jt(t,n);if(e<0)return!1;f(),n.splice(e,1);var r=g(t.fromId),o=g(t.toId);return r&&(e=jt(t,r.links))>=0&&r.links.splice(e,1),o&&(e=jt(t,o.links))>=0&&o.links.splice(e,1),u(t,"remove"),l(),!0}function x(t,e){var n,r=g(t);if(!r||!r.links)return null;for(n=0;n<r.links.length;++n){var o=r.links[n];if(o.fromId===t&&o.toId===e)return o}return null}function _(){}function w(){o+=1}function k(){0===(o-=1)&&a.length>0&&(c.fire("changed",a),a.length=0)}function A(t){if("function"!=typeof t)throw new Error("Function is expected to iterate over graph nodes. You passed "+t);for(var n=e.values(),r=n.next();!r.done;){if(t(r.value))return!0;r=n.next()}}};function jt(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var n,r=e.length;for(n=0;n<r;n+=1)if(e[n]===t)return n;return-1}function zt(t,e){this.id=t,this.links=null,this.data=e}function Nt(t,e){t.links?t.links.push(e):t.links=[e]}function Pt(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function Et(t,e){return t.toString()+"ðŸ‘‰ "+e.toString()}var qt=function(t,e,n,r){this.from=t,this.to=e,this.length=n,this.coeff=r};var St=function(t,e,n){if("[object Array]"===Object.prototype.toString.call(n))for(var r=0;r<n.length;++r)Dt(t,e,n[r]);else for(var o in t)Dt(t,e,o)};function Dt(t,e,n){if(t.hasOwnProperty(n)){if("function"==typeof e[n])return;e[n]=function(r){return void 0!==r?(t[n]=r,e):t[n]}}}var Ct=function t(e,n){var r;e||(e={});if(n)for(r in n)if(n.hasOwnProperty(r)){var o=e.hasOwnProperty(r),i=typeof n[r];!o||typeof e[r]!==i?e[r]=n[r]:"object"===i&&(e[r]=t(e[r],n[r]))}return e};function Tt(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var Lt=Tt((function(t){function e(t){return new n("number"==typeof t?t:+new Date)}function n(t){this.seed=t}function r(){var t=this.seed;return t=4294967295&(3042594569^(t=(t=4294967295&((t=(t=4294967295&(3345072700^(t=t+2127912214+(t<<12)&4294967295)^t>>>19))+374761393+(t<<5)&4294967295)+3550635116^t<<9))+4251993797+(t<<3)&4294967295)^t>>>16),this.seed=t,(268435455&t)/268435456}t.exports=e,t.exports.random=e,t.exports.randomIterator=function(t,n){var r=n||e();if("function"!=typeof r.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(e){var n,o,i;for(n=t.length-1;n>0;--n)o=r.next(n+1),i=t[o],t[o]=t[n],t[n]=i,e(i);t.length&&e(t[0])},shuffle:function(){var e,n,o;for(e=t.length-1;e>0;--e)n=r.next(e+1),o=t[n],t[n]=t[e],t[e]=o;return t}}},n.prototype.next=function(t){return Math.floor(this.nextDouble()*t)},n.prototype.nextDouble=r,n.prototype.uniform=r,n.prototype.gaussian=function(){var t,e,n;do{e=2*this.nextDouble()-1,n=2*this.nextDouble()-1,t=e*e+n*n}while(t>=1||0===t);return e*Math.sqrt(-2*Math.log(t)/t)}})),Bt=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0},It=Rt;function Rt(){this.stack=[],this.popIdx=0}function Ft(t,e){this.node=t,this.body=e}Rt.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new Ft(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};var Ut=function(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return n<1e-8&&r<1e-8},Vt=function(t){(t=t||{}).gravity="number"==typeof t.gravity?t.gravity:-1,t.theta="number"==typeof t.theta?t.theta:.8;var e=Lt.random(1984),n=Bt,r=It,o=Ut,i=t.gravity,a=[],u=new r,s=t.theta,f=[],l=0,c=h();return{insertBodies:function(t){var e,n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,i=Number.MIN_VALUE,a=t.length;e=a;for(;e--;){var u=t[e].pos.x,s=t[e].pos.y;u<n&&(n=u),u>o&&(o=u),s<r&&(r=s),s>i&&(i=s)}var f=o-n,p=i-r;f>p?i=r+f:o=n+p;l=0,(c=h()).left=n,c.right=o,c.top=r,c.bottom=i,(e=a-1)>=0&&(c.body=t[e]);for(;e--;)d(t[e])},getRoot:function(){return c},updateBodyForce:function(t){var n,r,o,u,f=a,l=0,h=0,d=1,p=0,g=1;f[0]=c;for(;d;){var y=f[p],v=y.body;d-=1,p+=1;var b=v!==t;v&&b?(r=v.pos.x-t.pos.x,o=v.pos.y-t.pos.y,0===(u=Math.sqrt(r*r+o*o))&&(r=(e.nextDouble()-.5)/50,o=(e.nextDouble()-.5)/50,u=Math.sqrt(r*r+o*o)),n=i*v.mass*t.mass/(u*u*u),l+=n*r,h+=n*o):b&&(r=y.massX/y.mass-t.pos.x,o=y.massY/y.mass-t.pos.y,0===(u=Math.sqrt(r*r+o*o))&&(r=(e.nextDouble()-.5)/50,o=(e.nextDouble()-.5)/50,u=Math.sqrt(r*r+o*o)),(y.right-y.left)/u<s?(n=i*y.mass*t.mass/(u*u*u),l+=n*r,h+=n*o):(y.quad0&&(f[g]=y.quad0,d+=1,g+=1),y.quad1&&(f[g]=y.quad1,d+=1,g+=1),y.quad2&&(f[g]=y.quad2,d+=1,g+=1),y.quad3&&(f[g]=y.quad3,d+=1,g+=1)))}t.force.x+=l,t.force.y+=h},options:function(t){return t?("number"==typeof t.gravity&&(i=t.gravity),"number"==typeof t.theta&&(s=t.theta),this):{gravity:i,theta:s}}};function h(){var t=f[l];return t?(t.quad0=null,t.quad1=null,t.quad2=null,t.quad3=null,t.body=null,t.mass=t.massX=t.massY=0,t.left=t.right=t.top=t.bottom=0):(t=new n,f[l]=t),++l,t}function d(t){for(u.reset(),u.push(c,t);!u.isEmpty();){var n=u.pop(),r=n.node,i=n.body;if(r.body){var a=r.body;if(r.body=null,o(a.pos,i.pos)){var s=3;do{var f=e.nextDouble(),l=(r.right-r.left)*f,d=(r.bottom-r.top)*f;a.pos.x=r.left+l,a.pos.y=r.top+d,s-=1}while(s>0&&o(a.pos,i.pos));if(0===s&&o(a.pos,i.pos))return}u.push(r,a),u.push(r,i)}else{var p=i.pos.x,g=i.pos.y;r.mass=r.mass+i.mass,r.massX=r.massX+i.mass*p,r.massY=r.massY+i.mass*g;var y=0,v=r.left,b=(r.right+v)/2,m=r.top,x=(r.bottom+m)/2;p>b&&(y+=1,v=b,b=r.right),g>x&&(y+=2,m=x,x=r.bottom);var _=Ht(r,y);_?u.push(_,i):((_=h()).left=v,_.top=m,_.right=b,_.bottom=x,_.body=i,Gt(r,y,_))}}}};function Ht(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:null}function Gt(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e&&(t.quad3=n)}var Xt=function(t,e){var n=Lt.random(42),r={x1:0,y1:0,x2:0,y2:0};return{box:r,update:function(){var e=t.length;if(0===e)return;var n=Number.MAX_VALUE,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MIN_VALUE;for(;e--;){var u=t[e];u.isPinned?(u.pos.x=u.prevPos.x,u.pos.y=u.prevPos.y):(u.prevPos.x=u.pos.x,u.prevPos.y=u.pos.y),u.pos.x<n&&(n=u.pos.x),u.pos.x>i&&(i=u.pos.x),u.pos.y<o&&(o=u.pos.y),u.pos.y>a&&(a=u.pos.y)}r.x1=n,r.x2=i,r.y1=o,r.y2=a},reset:function(){r.x1=r.y1=0,r.x2=r.y2=0},getBestNewPosition:function(t){var o=r,i=0,a=0;if(t.length){for(var u=0;u<t.length;++u)i+=t[u].pos.x,a+=t[u].pos.y;i/=t.length,a/=t.length}else i=(o.x1+o.x2)/2,a=(o.y1+o.y2)/2;var s=e.springLength;return{x:i+n.next(s)-s/2,y:a+n.next(s)-s/2}}}},Wt=function(t){var e={update:function(e){e.force.x-=t.dragCoeff*e.velocity.x,e.force.y-=t.dragCoeff*e.velocity.y}};return St(t=Ct(t,{dragCoeff:.02}),e,["dragCoeff"]),e},Yt=function(t){var e=Ct,n=Lt.random(42),r={update:function(e){var r=e.from,o=e.to,i=e.length<0?t.springLength:e.length,a=o.pos.x-r.pos.x,u=o.pos.y-r.pos.y,s=Math.sqrt(a*a+u*u);0===s&&(a=(n.nextDouble()-.5)/50,u=(n.nextDouble()-.5)/50,s=Math.sqrt(a*a+u*u));var f=s-i,l=(!e.coeff||e.coeff<0?t.springCoeff:e.coeff)*f/s;r.force.x+=l*a,r.force.y+=l*u,o.force.x-=l*a,o.force.y-=l*u}};return St(t=e(t,{springCoeff:2e-4,springLength:80}),r,["springCoeff","springLength"]),r},$t=function(t,e){var n,r=0,o=0,i=0,a=0,u=t.length;if(0===u)return 0;for(n=0;n<u;++n){var s=t[n],f=e/s.mass;s.velocity.x+=f*s.force.x,s.velocity.y+=f*s.force.y;var l=s.velocity.x,c=s.velocity.y,h=Math.sqrt(l*l+c*c);h>1&&(s.velocity.x=l/h,s.velocity.y=c/h),r=e*s.velocity.x,i=e*s.velocity.y,s.pos.x+=r,s.pos.y+=i,o+=Math.abs(r),a+=Math.abs(i)}return(o*o+a*a)/u};var Qt={Body:Zt,Vector2d:Jt,Body3d:Kt,Vector3d:te};function Zt(t,e){this.pos=new Jt(t,e),this.prevPos=new Jt(t,e),this.force=new Jt,this.velocity=new Jt,this.mass=1}function Jt(t,e){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0)}function Kt(t,e,n){this.pos=new te(t,e,n),this.prevPos=new te(t,e,n),this.force=new te,this.velocity=new te,this.mass=1}function te(t,e,n){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0,this.z="number"==typeof t.z?t.z:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.z="number"==typeof n?n:0)}Zt.prototype.setPosition=function(t,e){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e},Jt.prototype.reset=function(){this.x=this.y=0},Kt.prototype.setPosition=function(t,e,n){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e,this.prevPos.z=this.pos.z=n},te.prototype.reset=function(){this.x=this.y=this.z=0};var ee=function(t){return new Qt.Body(t)},ne=function(t){var e=qt,n=St,r=Ot,o=(t=Ct(t,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20})).createQuadTree||Vt,i=t.createBounds||Xt,a=t.createDragForce||Wt,u=t.createSpringForce||Yt,s=t.integrator||$t,f=t.createBody||ee,l=[],c=[],h=o(t),d=i(l,t),p=u(t),g=a(t),y=!0,v={bodies:l,quadTree:h,springs:c,settings:t,step:function(){!function(){var t,e=l.length;if(e)for(h.insertBodies(l);e--;)(t=l[e]).isPinned||(t.force.reset(),h.updateBodyForce(t),g.update(t));e=c.length;for(;e--;)p.update(c[e])}();var e=s(l,t.timeStep);return d.update(),e},addBody:function(t){if(!t)throw new Error("Body is required");return l.push(t),t},addBodyAt:function(t){if(!t)throw new Error("Body position is required");var e=f(t);return l.push(e),e},removeBody:function(t){if(t){var e=l.indexOf(t);if(!(e<0))return l.splice(e,1),0===l.length&&d.reset(),!0}},addSpring:function(t,n,r,o){if(!t||!n)throw new Error("Cannot add null spring to force simulator");"number"!=typeof r&&(r=-1);var i=new e(t,n,r,o>=0?o:-1);return c.push(i),i},getTotalMovement:function(){return 0},removeSpring:function(t){if(t){var e=c.indexOf(t);return e>-1?(c.splice(e,1),!0):void 0}},getBestNewBodyPosition:function(t){return d.getBestNewPosition(t)},getBBox:function(){return y&&(d.update(),y=!1),d.box},invalidateBBox:function(){y=!0},gravity:function(e){return void 0!==e?(t.gravity=e,h.options({gravity:e}),this):t.gravity},theta:function(e){return void 0!==e?(t.theta=e,h.options({theta:e}),this):t.theta}};return n(t,v),r(v),v};var re=function(t,e){if(!t)throw new Error("Graph structure cannot be undefined");var n=ne(e),r=function(e){var n=t.getLinks(e);return n?1+n.length/3:1};e&&"function"==typeof e.nodeMass&&(r=e.nodeMass);var o=new Map,i={},a=0,u=n.settings.springTransform||ie;a=0,t.forEachNode((function(t){c(t.id),a+=1})),t.forEachLink(d),t.on("changed",l);var s=!1,f={step:function(){if(0===a)return!0;var t=n.step();f.lastMove=t,f.fire("step");var e,r=t/a<=.01;return s!==r&&(s=r,e=r,f.fire("stable",e)),r},getNodePosition:function(t){return y(t).pos},setNodePosition:function(t){var e=y(t);e.setPosition.apply(e,Array.prototype.slice.call(arguments,1)),n.invalidateBBox()},getLinkPosition:function(t){var e=i[t];if(e)return{from:e.from.pos,to:e.to.pos}},getGraphRect:function(){return n.getBBox()},forEachBody:function(t){o.forEach((function(e,n){t(e,n)}))},pinNode:function(t,e){y(t.id).isPinned=!!e},isNodePinned:function(t){return y(t.id).isPinned},dispose:function(){t.off("changed",l),f.fire("disposed")},getBody:function(t){return o.get(t)},getSpring:function(e,n){var r;if(void 0===n)r="object"!=typeof e?e:e.id;else{var o=t.hasLink(e,n);if(!o)return;r=o.id}return i[r]},simulator:n,graph:t,lastMove:0};return Ot(f),f;function l(e){for(var n=0;n<e.length;++n){var r=e[n];"add"===r.changeType?(r.node&&c(r.node.id),r.link&&d(r.link)):"remove"===r.changeType&&(r.node&&h(r.node),r.link&&p(r.link))}a=t.getNodesCount()}function c(e){var r=o.get(e);if(!r){var i=t.getNode(e);if(!i)throw new Error("initBody() was called with unknown node id");var a=i.position;if(!a){var u=function(t){var e=[];if(!t.links)return e;for(var n=Math.min(t.links.length,2),r=0;r<n;++r){var i=t.links[r],a=i.fromId!==t.id?o.get(i.fromId):o.get(i.toId);a&&a.pos&&e.push(a)}return e}(i);a=n.getBestNewBodyPosition(u)}(r=n.addBodyAt(a)).id=e,o.set(e,r),g(e),function(t){return t&&(t.isPinned||t.data&&t.data.isPinned)}(i)&&(r.isPinned=!0)}}function h(t){var e=t.id,r=o.get(e);r&&(o.delete(e),n.removeBody(r))}function d(t){g(t.fromId),g(t.toId);var e=o.get(t.fromId),r=o.get(t.toId),a=n.addSpring(e,r,t.length);u(t,a),i[t.id]=a}function p(e){var r=i[e.id];if(r){var o=t.getNode(e.fromId),a=t.getNode(e.toId);o&&g(o.id),a&&g(a.id),delete i[e.id],n.removeSpring(r)}}function g(t){var e=o.get(t);if(e.mass=r(t),Number.isNaN(e.mass))throw new Error("Node mass should be a number")}function y(t){var e=o.get(t);return e||(c(t),e=o.get(t)),e}},oe=ne;function ie(){}re.simulator=oe;var ae=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.quad4=null,this.quad5=null,this.quad6=null,this.quad7=null,this.mass=0,this.massX=0,this.massY=0,this.massZ=0,this.left=0,this.top=0,this.bottom=0,this.right=0,this.front=0,this.back=0},ue=se;function se(){this.stack=[],this.popIdx=0}function fe(t,e){this.node=t,this.body=e}se.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new fe(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};var le=function(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y),o=Math.abs(t.z-e.z);return n<1e-8&&r<1e-8&&o<1e-8},ce=function(t){(t=t||{}).gravity="number"==typeof t.gravity?t.gravity:-1,t.theta="number"==typeof t.theta?t.theta:.8;var e=Lt.random(1984),n=ae,r=ue,o=le,i=t.gravity,a=[],u=new r,s=t.theta,f=[],l=0,c=function(){var t=f[l];return t?(t.quad0=null,t.quad4=null,t.quad1=null,t.quad5=null,t.quad2=null,t.quad6=null,t.quad3=null,t.quad7=null,t.body=null,t.mass=t.massX=t.massY=t.massZ=0,t.left=t.right=t.top=t.bottom=t.front=t.back=0):(t=new n,f[l]=t),++l,t},h=c(),d=function(t){for(u.reset(),u.push(h,t);!u.isEmpty();){var n=u.pop(),r=n.node,i=n.body;if(r.body){var a=r.body;if(r.body=null,o(a.pos,i.pos)){var s=3;do{var f=e.nextDouble(),l=(r.right-r.left)*f,d=(r.bottom-r.top)*f,p=(r.front-r.back)*f;a.pos.x=r.left+l,a.pos.y=r.top+d,a.pos.z=r.back+p,s-=1}while(s>0&&o(a.pos,i.pos));if(0===s&&o(a.pos,i.pos))return}u.push(r,a),u.push(r,i)}else{var g=i.pos.x,y=i.pos.y,v=i.pos.z;r.mass+=i.mass,r.massX+=i.mass*g,r.massY+=i.mass*y,r.massZ+=i.mass*v;var b=0,m=r.left,x=(r.right+m)/2,_=r.top,w=(r.bottom+_)/2,k=r.back,A=(r.front+k)/2;if(g>x){b+=1;var O=m;m=x,x+=x-O}if(y>w){b+=2;var M=_;_=w,w+=w-M}if(v>A){b+=4;var j=k;A=(k=A)+(k-j)}var z=he(r,b);z?u.push(z,i):((z=c()).left=m,z.top=_,z.right=x,z.bottom=w,z.back=k,z.front=A,z.body=i,de(r,b,z))}}};return{insertBodies:function(t){var e,n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MIN_VALUE,u=Number.MIN_VALUE,s=t.length;for(e=s;e--;){var f=t[e].pos,p=f.x,g=f.y,y=f.z;p<n&&(n=p),p>i&&(i=p),g<r&&(r=g),g>a&&(a=g),y<o&&(o=y),y>u&&(u=y)}var v=Math.max(i-n,Math.max(a-r,u-o));for(i=n+v,a=r+v,u=o+v,l=0,(h=c()).left=n,h.right=i,h.top=r,h.bottom=a,h.back=o,h.front=u,(e=s-1)>0&&(h.body=t[e]);e--;)d(t[e])},updateBodyForce:function(t){var n,r,o,u,f,l=a,c=0,d=0,p=0,g=1,y=0,v=1;for(l[0]=h;g;){var b=l[y],m=b.body;g-=1,y+=1;var x=m!==t;m&&x?(r=m.pos.x-t.pos.x,o=m.pos.y-t.pos.y,u=m.pos.z-t.pos.z,0===(f=Math.sqrt(r*r+o*o+u*u))&&(r=(e.nextDouble()-.5)/50,o=(e.nextDouble()-.5)/50,u=(e.nextDouble()-.5)/50,f=Math.sqrt(r*r+o*o+u*u)),c+=(n=i*m.mass*t.mass/(f*f*f))*r,d+=n*o,p+=n*u):x&&(r=b.massX/b.mass-t.pos.x,o=b.massY/b.mass-t.pos.y,u=b.massZ/b.mass-t.pos.z,0===(f=Math.sqrt(r*r+o*o+u*u))&&(r=(e.nextDouble()-.5)/50,o=(e.nextDouble()-.5)/50,u=(e.nextDouble()-.5)/50,f=Math.sqrt(r*r+o*o+u*u)),(b.right-b.left)/f<s?(c+=(n=i*b.mass*t.mass/(f*f*f))*r,d+=n*o,p+=n*u):(b.quad0&&(l[v]=b.quad0,g+=1,v+=1),b.quad1&&(l[v]=b.quad1,g+=1,v+=1),b.quad2&&(l[v]=b.quad2,g+=1,v+=1),b.quad3&&(l[v]=b.quad3,g+=1,v+=1),b.quad4&&(l[v]=b.quad4,g+=1,v+=1),b.quad5&&(l[v]=b.quad5,g+=1,v+=1),b.quad6&&(l[v]=b.quad6,g+=1,v+=1),b.quad7&&(l[v]=b.quad7,g+=1,v+=1)))}t.force.x+=c,t.force.y+=d,t.force.z+=p},options:function(t){return t?("number"==typeof t.gravity&&(i=t.gravity),"number"==typeof t.theta&&(s=t.theta),this):{gravity:i,theta:s}}}};function he(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:4===e?t.quad4:5===e?t.quad5:6===e?t.quad6:7===e?t.quad7:null}function de(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e?t.quad3=n:4===e?t.quad4=n:5===e?t.quad5=n:6===e?t.quad6=n:7===e&&(t.quad7=n)}var pe=function(t,e){var n=Lt.random(42),r={x1:0,y1:0,z1:0,x2:0,y2:0,z2:0};return{box:r,update:function(){var e=t.length;if(0===e)return;var n=Number.MAX_VALUE,o=Number.MAX_VALUE,i=Number.MAX_VALUE,a=Number.MIN_VALUE,u=Number.MIN_VALUE,s=Number.MIN_VALUE;for(;e--;){var f=t[e];f.isPinned?(f.pos.x=f.prevPos.x,f.pos.y=f.prevPos.y,f.pos.z=f.prevPos.z):(f.prevPos.x=f.pos.x,f.prevPos.y=f.pos.y,f.prevPos.z=f.pos.z),f.pos.x<n&&(n=f.pos.x),f.pos.x>a&&(a=f.pos.x),f.pos.y<o&&(o=f.pos.y),f.pos.y>u&&(u=f.pos.y),f.pos.z<i&&(i=f.pos.z),f.pos.z>s&&(s=f.pos.z)}r.x1=n,r.x2=a,r.y1=o,r.y2=u,r.z1=i,r.z2=s},reset:function(){r.x1=r.y1=0,r.x2=r.y2=0,r.z1=r.z2=0},getBestNewPosition:function(t){var o=r,i=0,a=0,u=0;if(t.length){for(var s=0;s<t.length;++s)i+=t[s].pos.x,a+=t[s].pos.y,u+=t[s].pos.z;i/=t.length,a/=t.length,u/=t.length}else i=(o.x1+o.x2)/2,a=(o.y1+o.y2)/2,u=(o.z1+o.z2)/2;var f=e.springLength;return{x:i+n.next(f)-f/2,y:a+n.next(f)-f/2,z:u+n.next(f)-f/2}}}},ge=function(t){var e={update:function(e){e.force.x-=t.dragCoeff*e.velocity.x,e.force.y-=t.dragCoeff*e.velocity.y,e.force.z-=t.dragCoeff*e.velocity.z}};return St(t=Ct(t,{dragCoeff:.02}),e,["dragCoeff"]),e},ye=function(t){var e=Ct,n=Lt.random(42),r={update:function(e){var r=e.from,o=e.to,i=e.length<0?t.springLength:e.length,a=o.pos.x-r.pos.x,u=o.pos.y-r.pos.y,s=o.pos.z-r.pos.z,f=Math.sqrt(a*a+u*u+s*s);0===f&&(a=(n.nextDouble()-.5)/50,u=(n.nextDouble()-.5)/50,s=(n.nextDouble()-.5)/50,f=Math.sqrt(a*a+u*u+s*s));var l=f-i,c=(!e.coeff||e.coeff<0?t.springCoeff:e.coeff)*l/f*e.weight;r.force.x+=c*a,r.force.y+=c*u,r.force.z+=c*s,o.force.x-=c*a,o.force.y-=c*u,o.force.z-=c*s}};return St(t=e(t,{springCoeff:2e-4,springLength:80}),r,["springCoeff","springLength"]),r},ve=function(t){return new Qt.Body3d(t)},be=function(t,e){var n,r=0,o=0,i=0,a=t.length;for(n=0;n<a;++n){var u=t[n],s=e*e/u.mass;u.pos.x=2*u.pos.x-u.prevPos.x+u.force.x*s,u.pos.y=2*u.pos.y-u.prevPos.y+u.force.y*s,u.pos.z=2*u.pos.z-u.prevPos.z+u.force.z*s,r+=Math.abs(u.pos.x-u.prevPos.x),o+=Math.abs(u.pos.y-u.prevPos.y),i+=Math.abs(u.pos.z-u.prevPos.z)}return(r*r+o*o+i*i)/t.length};var me=function(t,e){var n,r=0,o=0,i=0,a=0,u=0,s=0,f=t.length;for(n=0;n<f;++n){var l=t[n],c=e/l.mass;l.velocity.x+=c*l.force.x,l.velocity.y+=c*l.force.y,l.velocity.z+=c*l.force.z;var h=l.velocity.x,d=l.velocity.y,p=l.velocity.z,g=Math.sqrt(h*h+d*d+p*p);g>1&&(l.velocity.x=h/g,l.velocity.y=d/g,l.velocity.z=p/g),r=e*l.velocity.x,i=e*l.velocity.y,u=e*l.velocity.z,l.pos.x+=r,l.pos.y+=i,l.pos.z+=u,o+=Math.abs(r),a+=Math.abs(i),s+=Math.abs(u)}return(o*o+a*a+s*s)/t.length};var xe=_e;function _e(t,e){return e=Ct(e,{createQuadTree:ce,createBounds:pe,createDragForce:ge,createSpringForce:ye,integrator:we(e),createBody:ve}),_e.get2dLayout(t,e)}function we(t){return t&&"verlet"===t.integrator?be:me}function ke(t,e,n){var r,o,i,a,u;function s(){var f=Date.now()-a;f<e&&f>=0?r=setTimeout(s,e-f):(r=null,n||(u=t.apply(i,o),i=o=null))}null==e&&(e=100);var f=function(){i=this,o=arguments,a=Date.now();var f=n&&!r;return r||(r=setTimeout(s,e)),f&&(u=t.apply(i,o),i=o=null),u};return f.clear=function(){r&&(clearTimeout(r),r=null)},f.flush=function(){r&&(u=t.apply(i,o),i=o=null,clearTimeout(r),r=null)},f}_e.get2dLayout=re,ke.debounce=ke;var Ae=ke;function Oe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Me=function t(e,n){var r=n.default,o=void 0===r?null:r,i=n.triggerUpdate,a=void 0===i||i,u=n.onChange,s=void 0===u?function(t,e){}:u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.defaultVal=o,this.triggerUpdate=a,this.onChange=s};var je=function(t){return t instanceof Function?t:"string"==typeof t?function(e){return e[t]}:function(e){return t}};function ze(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n}function Ne(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n>o||void 0===n&&o>=o)&&(n=o)}return n}function Pe(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Ee(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function qe(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Se(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var De=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(e instanceof Array?e.length?e:[void 0]:[e]).map((function(t){return{keyAccessor:t,isProp:!(t instanceof Function)}})),i=t.reduce((function(t,e){var r=t,i=e;return o.forEach((function(t,e){var a,u=t.keyAccessor;if(t.isProp){var s=i,f=s[u],l=Pe(s,[u].map(Se));a=f,i=l}else a=u(i,e);e+1<o.length?(r.hasOwnProperty(a)||(r[a]={}),r=r[a]):n?(r.hasOwnProperty(a)||(r[a]=[]),r[a].push(i)):r[a]=i})),t}),{});n instanceof Function&&function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r===o.length?Object.keys(e).forEach((function(t){return e[t]=n(e[t])})):Object.values(e).forEach((function(e){return t(e,r+1)}))}(i);var a=i;return r&&(a=[],function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.length===o.length?a.push({keys:n,vals:e}):Object.entries(e).forEach((function(e){var r=Ee(e,2),o=r[0],i=r[1];return t(i,[].concat(qe(n),[o]))}))}(i),e instanceof Array&&0===e.length&&1===a.length&&(a[0].keys=[])),a};function Ce(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Te(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Le(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Be(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ie(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Re(t,e,n){var r=n.objBindAttr,o=void 0===r?"__obj":r,i=n.dataBindAttr,a=void 0===i?"__data":i,u=n.idAccessor,s=n.purge,f=void 0!==s&&s,l=function(t){return t.hasOwnProperty(a)},c=e.filter((function(t){return!l(t)})),h=e.filter(l).map((function(t){return t[a]})),d=f?{enter:t,exit:h,update:[]}:function(t,e,n){var r={enter:[],update:[],exit:[]};if(n){var o=De(t,n,!1),i=De(e,n,!1),a=Object.assign({},o,i);Object.entries(a).forEach((function(t){var e=Be(t,2),n=e[0],a=e[1],u=o.hasOwnProperty(n)?i.hasOwnProperty(n)?"update":"exit":"enter";r[u].push("update"===u?[o[n],i[n]]:a)}))}else{var u=new Set(t),s=new Set(e);new Set([].concat(Ie(u),Ie(s))).forEach((function(t){var e=u.has(t)?s.has(t)?"update":"exit":"enter";r[e].push("update"===e?[t,t]:t)}))}return r}(h,t,u);return d.update=d.update.map((function(t){var e=Be(t,2),n=e[0],r=e[1];return n!==r&&(r[o]=n[o],r[o][a]=r),r})),d.exit=d.exit.concat(c.map((function(t){return Ce({},o,t)}))),d}function Fe(t,e,n,r,o){var i=o.createObj,a=void 0===i?function(t){return{}}:i,u=o.updateObj,s=void 0===u?function(t,e){}:u,f=o.exitObj,l=void 0===f?function(t){}:f,c=o.objBindAttr,h=void 0===c?"__obj":c,d=o.dataBindAttr,p=void 0===d?"__data":d,g=Le(o,["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"]),y=Re(t,e,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Te(Object(n),!0).forEach((function(e){Ce(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({objBindAttr:h,dataBindAttr:p},g)),v=y.enter,b=y.update;y.exit.forEach((function(t){var e=t[h];delete t[h],l(e),r(e)}));var m=function(t){var e=[];return t.forEach((function(t){var n=a(t);n&&(n[p]=t,t[h]=n,e.push(n))})),e}(v);!function(t){t.forEach((function(t){var e=t[h];e&&(e[p]=t,s(e,t))}))}([].concat(Ie(v),Ie(b))),m.forEach(n)}var Ue=function t(e){e.geometry&&e.geometry.dispose(),e.material&&function t(e){e instanceof Array?e.forEach(t):(e.map&&e.map.dispose(),e.dispose())}(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(t)},Ve=function(t){for(;t.children.length;){var e=t.children[0];t.remove(e),Ue(e)}};function He(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.objFilter,o=void 0===r?function(){return!0}:r,a=c(n,["objFilter"]);return Fe(t,e.children.filter(o),(function(t){return e.add(t)}),(function(t){e.remove(t),Ve(t)}),i({objBindAttr:"__threeObj"},a))}function Ge(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const Xe=Symbol("implicit");var We=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Ye=Tt((function(t){!function(e){var n=/^\s+/,r=/\s+$/,o=0,i=e.round,a=e.min,u=e.max,s=e.random;function f(t,s){if(s=s||{},(t=t||"")instanceof f)return t;if(!(this instanceof f))return new f(t,s);var l=function(t){var o={r:0,g:0,b:0},i=1,s=null,f=null,l=null,c=!1,h=!1;"string"==typeof t&&(t=function(t){t=t.replace(n,"").replace(r,"").toLowerCase();var e,o=!1;if(j[t])t=j[t],o=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=R.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=R.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=R.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=R.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=R.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=R.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=R.hex8.exec(t))return{r:q(e[1]),g:q(e[2]),b:q(e[3]),a:T(e[4]),format:o?"name":"hex8"};if(e=R.hex6.exec(t))return{r:q(e[1]),g:q(e[2]),b:q(e[3]),format:o?"name":"hex"};if(e=R.hex4.exec(t))return{r:q(e[1]+""+e[1]),g:q(e[2]+""+e[2]),b:q(e[3]+""+e[3]),a:T(e[4]+""+e[4]),format:o?"name":"hex8"};if(e=R.hex3.exec(t))return{r:q(e[1]+""+e[1]),g:q(e[2]+""+e[2]),b:q(e[3]+""+e[3]),format:o?"name":"hex"};return!1}(t));"object"==typeof t&&(F(t.r)&&F(t.g)&&F(t.b)?(d=t.r,p=t.g,g=t.b,o={r:255*P(d,255),g:255*P(p,255),b:255*P(g,255)},c=!0,h="%"===String(t.r).substr(-1)?"prgb":"rgb"):F(t.h)&&F(t.s)&&F(t.v)?(s=D(t.s),f=D(t.v),o=function(t,n,r){t=6*P(t,360),n=P(n,100),r=P(r,100);var o=e.floor(t),i=t-o,a=r*(1-n),u=r*(1-i*n),s=r*(1-(1-i)*n),f=o%6;return{r:255*[r,u,a,a,s,r][f],g:255*[s,r,r,u,a,a][f],b:255*[a,a,s,r,r,u][f]}}(t.h,s,f),c=!0,h="hsv"):F(t.h)&&F(t.s)&&F(t.l)&&(s=D(t.s),l=D(t.l),o=function(t,e,n){var r,o,i;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=P(t,360),e=P(e,100),n=P(n,100),0===e)r=o=i=n;else{var u=n<.5?n*(1+e):n+e-n*e,s=2*n-u;r=a(s,u,t+1/3),o=a(s,u,t),i=a(s,u,t-1/3)}return{r:255*r,g:255*o,b:255*i}}(t.h,s,l),c=!0,h="hsl"),t.hasOwnProperty("a")&&(i=t.a));var d,p,g;return i=N(i),{ok:c,format:t.format||h,r:a(255,u(o.r,0)),g:a(255,u(o.g,0)),b:a(255,u(o.b,0)),a:i}}(t);this._originalInput=t,this._r=l.r,this._g=l.g,this._b=l.b,this._a=l.a,this._roundA=i(100*this._a)/100,this._format=s.format||l.format,this._gradientType=s.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=l.ok,this._tc_id=o++}function l(t,e,n){t=P(t,255),e=P(e,255),n=P(n,255);var r,o,i=u(t,e,n),s=a(t,e,n),f=(i+s)/2;if(i==s)r=o=0;else{var l=i-s;switch(o=f>.5?l/(2-i-s):l/(i+s),i){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4}r/=6}return{h:r,s:o,l:f}}function c(t,e,n){t=P(t,255),e=P(e,255),n=P(n,255);var r,o,i=u(t,e,n),s=a(t,e,n),f=i,l=i-s;if(o=0===i?0:l/i,i==s)r=0;else{switch(i){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4}r/=6}return{h:r,s:o,v:f}}function h(t,e,n,r){var o=[S(i(t).toString(16)),S(i(e).toString(16)),S(i(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function d(t,e,n,r){return[S(C(r)),S(i(t).toString(16)),S(i(e).toString(16)),S(i(n).toString(16))].join("")}function p(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.s-=e/100,n.s=E(n.s),f(n)}function g(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.s+=e/100,n.s=E(n.s),f(n)}function y(t){return f(t).desaturate(100)}function v(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.l+=e/100,n.l=E(n.l),f(n)}function b(t,e){e=0===e?0:e||10;var n=f(t).toRgb();return n.r=u(0,a(255,n.r-i(-e/100*255))),n.g=u(0,a(255,n.g-i(-e/100*255))),n.b=u(0,a(255,n.b-i(-e/100*255))),f(n)}function m(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.l-=e/100,n.l=E(n.l),f(n)}function x(t,e){var n=f(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,f(n)}function _(t){var e=f(t).toHsl();return e.h=(e.h+180)%360,f(e)}function w(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+120)%360,s:e.s,l:e.l}),f({h:(n+240)%360,s:e.s,l:e.l})]}function k(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+90)%360,s:e.s,l:e.l}),f({h:(n+180)%360,s:e.s,l:e.l}),f({h:(n+270)%360,s:e.s,l:e.l})]}function A(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+72)%360,s:e.s,l:e.l}),f({h:(n+216)%360,s:e.s,l:e.l})]}function O(t,e,n){e=e||6,n=n||30;var r=f(t).toHsl(),o=360/n,i=[f(t)];for(r.h=(r.h-(o*e>>1)+720)%360;--e;)r.h=(r.h+o)%360,i.push(f(r));return i}function M(t,e){e=e||6;for(var n=f(t).toHsv(),r=n.h,o=n.s,i=n.v,a=[],u=1/e;e--;)a.push(f({h:r,s:o,v:i})),i=(i+u)%1;return a}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,n,r,o=this.toRgb();return t=o.r/255,n=o.g/255,r=o.b/255,.2126*(t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:e.pow((r+.055)/1.055,2.4))},setAlpha:function(t){return this._a=N(t),this._roundA=i(100*this._a)/100,this},toHsv:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=c(this._r,this._g,this._b),e=i(360*t.h),n=i(100*t.s),r=i(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=l(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=l(this._r,this._g,this._b),e=i(360*t.h),n=i(100*t.s),r=i(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,o){var a=[S(i(t).toString(16)),S(i(e).toString(16)),S(i(n).toString(16)),S(C(r))];if(o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(100*P(this._r,255))+"%",g:i(100*P(this._g,255))+"%",b:i(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+i(100*P(this._r,255))+"%, "+i(100*P(this._g,255))+"%, "+i(100*P(this._b,255))+"%)":"rgba("+i(100*P(this._r,255))+"%, "+i(100*P(this._g,255))+"%, "+i(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(z[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var o=f(t);n="#"+d(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return f(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(M,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},f.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:D(t[r]));t=n}return f(t,e)},f.equals=function(t,e){return!(!t||!e)&&f(t).toRgbString()==f(e).toRgbString()},f.random=function(){return f.fromRatio({r:s(),g:s(),b:s()})},f.mix=function(t,e,n){n=0===n?0:n||50;var r=f(t).toRgb(),o=f(e).toRgb(),i=n/100;return f({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},
// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)
// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)
f.readability=function(t,n){var r=f(t),o=f(n);return(e.max(r.getLuminance(),o.getLuminance())+.05)/(e.min(r.getLuminance(),o.getLuminance())+.05)},f.isReadable=function(t,e,n){var r,o,i=f.readability(t,e);switch(o=!1,(r=function(t){var e,n;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==n&&"large"!==n&&(n="small");return{level:e,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7}return o},f.mostReadable=function(t,e,n){var r,o,i,a,u=null,s=0;o=(n=n||{}).includeFallbackColors,i=n.level,a=n.size;for(var l=0;l<e.length;l++)(r=f.readability(t,e[l]))>s&&(s=r,u=f(e[l]));return f.isReadable(t,u,{level:i,size:a})||!o?u:(n.includeFallbackColors=!1,f.mostReadable(t,["#fff","#000"],n))};var j=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},z=f.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(j);function N(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function P(t,n){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var r=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=a(n,u(0,parseFloat(t))),r&&(t=parseInt(t*n,10)/100),e.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function E(t){return a(1,u(0,t))}function q(t){return parseInt(t,16)}function S(t){return 1==t.length?"0"+t:""+t}function D(t){return t<=1&&(t=100*t+"%"),t}function C(t){return e.round(255*parseFloat(t)).toString(16)}function T(t){return q(t)/255}var L,B,I,R=(B="[\\s|\\(]+("+(L="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+L+")[,|\\s]+("+L+")\\s*\\)?",I="[\\s|\\(]+("+L+")[,|\\s]+("+L+")[,|\\s]+("+L+")[,|\\s]+("+L+")\\s*\\)?",{CSS_UNIT:new RegExp(L),rgb:new RegExp("rgb"+B),rgba:new RegExp("rgba"+I),hsl:new RegExp("hsl"+B),hsla:new RegExp("hsla"+I),hsv:new RegExp("hsv"+B),hsva:new RegExp("hsva"+I),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function F(t){return!!R.CSS_UNIT.exec(t)}t.exports?t.exports=f:window.tinycolor=f}(Math)})),$e=function(t){return isNaN(t)?parseInt(Ye(t).toHex(),16):t},Qe=function(t){return isNaN(t)?Ye(t).getAlpha():1},Ze=function t(){var e=new Map,n=[],r=[],o=Xe;function i(t){var i=t+"",a=e.get(i);if(!a){if(o!==Xe)return o;e.set(i,a=n.push(t))}return r[(a-1)%r.length]}return i.domain=function(t){if(!arguments.length)return n.slice();n=[],e=new Map;for(const r of t){const t=r+"";e.has(t)||e.set(t,n.push(r))}return i},i.range=function(t){return arguments.length?(r=Array.from(t),i):r.slice()},i.unknown=function(t){return arguments.length?(o=t,i):o},i.copy=function(){return t(n,r).unknown(o)},Ge.apply(i,arguments),i}(We);function Je(t,e,n){e&&"string"==typeof n&&t.filter((function(t){return!t[n]})).forEach((function(t){t[n]=Ze(e(t))}))}var Ke,tn,en,nn,rn,on,an,un,sn,fn,ln,cn,hn,dn,pn=window.THREE?window.THREE:{Group:t.Group,Mesh:t.Mesh,MeshLambertMaterial:t.MeshLambertMaterial,Color:t.Color,BufferGeometry:t.BufferGeometry,BufferAttribute:t.BufferAttribute,Matrix4:t.Matrix4,Vector3:t.Vector3,SphereBufferGeometry:t.SphereBufferGeometry,CylinderBufferGeometry:t.CylinderBufferGeometry,TubeBufferGeometry:t.TubeBufferGeometry,ConeBufferGeometry:t.ConeBufferGeometry,Line:t.Line,LineBasicMaterial:t.LineBasicMaterial,QuadraticBezierCurve3:t.QuadraticBezierCurve3,CubicBezierCurve3:t.CubicBezierCurve3,Box3:t.Box3},gn={graph:Mt,forcelayout:re,forcelayout3d:xe},yn=(new pn.BufferGeometry).setAttribute?"setAttribute":"addAttribute",vn=(new pn.BufferGeometry).applyMatrix4?"applyMatrix4":"applyMatrix";return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=function(e){a(i,e);var o=p(i);function i(){var e;n(this,i);for(var a=arguments.length,u=new Array(a),s=0;s<a;s++)u[s]=arguments[s];return(e=o.call.apply(o,[this].concat(u))).__kapsuleInstance=t().apply(void 0,[].concat(y(r?[h(e)]:[]),u)),e}return i}(e);return Object.keys(t()).forEach((function(t){return o.prototype[t]=function(){var e,n=(e=this.__kapsuleInstance)[t].apply(e,arguments);return n===this.__kapsuleInstance?this:n}})),o}((tn=(Ke={props:{jsonUrl:{onChange:function(t,e){var n=this;t&&!e.fetchingJson&&(e.fetchingJson=!0,e.onLoading(),fetch(t).then((function(t){return t.json()})).then((function(t){e.fetchingJson=!1,e.onFinishLoading(t),n.graphData(t)})))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(t,e){(t.nodes.length||t.links.length)&&console.info("force-graph loading",t.nodes.length+" nodes",t.links.length+" links"),e.engineRunning=!1}},numDimensions:{default:3,onChange:function(t,e){var n=e.d3ForceLayout.force("charge");function r(t,e){t.forEach((function(t){delete t[e],delete t["v".concat(e)]}))}n&&n.strength(t>2?-60:-30),t<3&&r(e.graphData.nodes,"z"),t<2&&r(e.graphData.nodes,"y")}},dagMode:{onChange:function(t,e){!t&&"d3"===e.forceEngine&&(e.graphData.nodes||[]).forEach((function(t){return t.fx=t.fy=t.fz=void 0}))}},dagLevelDistance:{},dagNodeFilter:{default:function(t){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.alphaDecay(t)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.alphaTarget(t)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.velocityDecay(t)}},ngraphPhysics:{},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(t){return t._flushObjects=!0,t._rerender(),this},d3Force:function(t,e,n){return void 0===n?t.d3ForceLayout.force(e):(t.d3ForceLayout.force(e,n),this)},d3ReheatSimulation:function(t){return t.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(t){return t.cntTicks=0,t.startTickTime=new Date,t.engineRunning=!0,this},tickFrame:function(t){var e,n,r,o,i="ngraph"!==t.forceEngine;return t.engineRunning&&function(){++t.cntTicks>t.cooldownTicks||new Date-t.startTickTime>t.cooldownTime||i&&t.d3AlphaMin>0&&t.d3ForceLayout.alpha()<t.d3AlphaMin?(t.engineRunning=!1,t.onEngineStop()):(t.layout[i?"tick":"step"](),t.onEngineTick()),t.graphData.nodes.forEach((function(e){var n=e.__threeObj;if(n){var r=i?e:t.layout.getNodePosition(e[t.nodeId]);n.position.x=r.x,n.position.y=r.y||0,n.position.z=r.z||0}}));var e=je(t.linkWidth),n=je(t.linkCurvature),r=je(t.linkCurveRotation),o=je(t.linkThreeObjectExtend);t.graphData.links.forEach((function(a){var u=a.__lineObj;if(u){var s=i?a:t.layout.getLinkPosition(t.layout.graph.getLink(a.source,a.target).id),f=s[i?"source":"from"],l=s[i?"target":"to"];if(f&&l&&f.hasOwnProperty("x")&&l.hasOwnProperty("x")){!function(e){var o=i?e:t.layout.getLinkPosition(t.layout.graph.getLink(e.source,e.target).id),a=o[i?"source":"from"],u=o[i?"target":"to"];if(a&&u&&a.hasOwnProperty("x")&&u.hasOwnProperty("x")){var s=n(e);if(s){var f,l=new pn.Vector3(a.x,a.y||0,a.z||0),c=new pn.Vector3(u.x,u.y||0,u.z||0),h=l.distanceTo(c),d=r(e);if(h>0){var p=u.x-a.x,g=u.y-a.y||0,y=(new pn.Vector3).subVectors(c,l),v=y.clone().multiplyScalar(s).cross(0!==p||0!==g?new pn.Vector3(0,0,1):new pn.Vector3(0,1,0)).applyAxisAngle(y.normalize(),d).add((new pn.Vector3).addVectors(l,c).divideScalar(2));f=new pn.QuadraticBezierCurve3(l,v,c)}else{var b=70*s,m=-d,x=m+Math.PI/2;f=new pn.CubicBezierCurve3(l,new pn.Vector3(b*Math.cos(x),b*Math.sin(x),0).add(l),new pn.Vector3(b*Math.cos(m),b*Math.sin(m),0).add(l),c)}e.__curve=f}else e.__curve=null}}(a);var c=o(a);if(!t.linkPositionUpdate||!t.linkPositionUpdate(c?u.children[1]:u,{start:{x:f.x,y:f.y,z:f.z},end:{x:l.x,y:l.y,z:l.z}},a)||c){var h=a.__curve,d=u.children.length?u.children[0]:u;if("Line"===d.type){if(h)d.geometry.setFromPoints(h.getPoints(30));else{var p=d.geometry.getAttribute("position");p&&p.array&&6===p.array.length||d.geometry[yn]("position",p=new pn.BufferAttribute(new Float32Array(6),3)),p.array[0]=f.x,p.array[1]=f.y||0,p.array[2]=f.z||0,p.array[3]=l.x,p.array[4]=l.y||0,p.array[5]=l.z||0,p.needsUpdate=!0}d.geometry.computeBoundingSphere()}else if("Mesh"===d.type)if(h){"TubeBufferGeometry"!==d.geometry.type&&(d.position.set(0,0,0),d.rotation.set(0,0,0),d.scale.set(1,1,1));var g=Math.ceil(10*e(a))/10/2,y=new pn.TubeBufferGeometry(h,30,g,t.linkResolution,!1);d.geometry.dispose(),d.geometry=y}else{if("CylinderBufferGeometry"!==d.geometry.type){var v=Math.ceil(10*e(a))/10/2,b=new pn.CylinderBufferGeometry(v,v,1,t.linkResolution,1,!1);b[vn]((new pn.Matrix4).makeTranslation(0,.5,0)),b[vn]((new pn.Matrix4).makeRotationX(Math.PI/2)),d.geometry.dispose(),d.geometry=b}var m=new pn.Vector3(f.x,f.y||0,f.z||0),x=new pn.Vector3(l.x,l.y||0,l.z||0),_=m.distanceTo(x);d.position.x=m.x,d.position.y=m.y,d.position.z=m.z,d.scale.z=_,d.parent.localToWorld(x),d.lookAt(x)}}}}}))}(),e=je(t.linkDirectionalArrowRelPos),n=je(t.linkDirectionalArrowLength),r=je(t.nodeVal),t.graphData.links.forEach((function(o){var a=o.__arrowObj;if(a){var u=i?o:t.layout.getLinkPosition(t.layout.graph.getLink(o.source,o.target).id),s=u[i?"source":"from"],f=u[i?"target":"to"];if(s&&f&&s.hasOwnProperty("x")&&f.hasOwnProperty("x")){var c=Math.sqrt(Math.max(0,r(s)||1))*t.nodeRelSize,h=Math.sqrt(Math.max(0,r(f)||1))*t.nodeRelSize,d=n(o),p=e(o),g=o.__curve?function(t){return o.__curve.getPoint(t)}:function(t){var e=function(t,e,n,r){return e[t]+(n[t]-e[t])*r||0};return{x:e("x",s,f,t),y:e("y",s,f,t),z:e("z",s,f,t)}},v=o.__curve?o.__curve.getLength():Math.sqrt(["x","y","z"].map((function(t){return Math.pow((f[t]||0)-(s[t]||0),2)})).reduce((function(t,e){return t+e}),0)),b=c+d+(v-c-h-d)*p,m=g(b/v),x=g((b-d)/v);["x","y","z"].forEach((function(t){return a.position[t]=x[t]}));var _=l(pn.Vector3,y(["x","y","z"].map((function(t){return m[t]}))));a.parent.localToWorld(_),a.lookAt(_)}}})),o=je(t.linkDirectionalParticleSpeed),t.graphData.links.forEach((function(e){var n=e.__photonsObj&&e.__photonsObj.children,r=e.__singleHopPhotonsObj&&e.__singleHopPhotonsObj.children;if(r&&r.length||n&&n.length){var a=i?e:t.layout.getLinkPosition(t.layout.graph.getLink(e.source,e.target).id),u=a[i?"source":"from"],s=a[i?"target":"to"];if(u&&s&&u.hasOwnProperty("x")&&s.hasOwnProperty("x")){var f=o(e),l=e.__curve?function(t){return e.__curve.getPoint(t)}:function(t){var e=function(t,e,n,r){return e[t]+(n[t]-e[t])*r||0};return{x:e("x",u,s,t),y:e("y",u,s,t),z:e("z",u,s,t)}};[].concat(y(n||[]),y(r||[])).forEach((function(t,e){var r="singleHopPhotons"===t.parent.__linkThreeObjType;if(t.hasOwnProperty("__progressRatio")||(t.__progressRatio=r?0:e/n.length),t.__progressRatio+=f,t.__progressRatio>=1){if(r)return t.parent.remove(t),void Ve(t);t.__progressRatio=t.__progressRatio%1}var o=t.__progressRatio,i=l(o);["x","y","z"].forEach((function(e){return t.position[e]=i[e]}))}))}}})),this},emitParticle:function(t,e){if(e){if(!e.__singleHopPhotonsObj){var n=new pn.Group;n.__linkThreeObjType="singleHopPhotons",e.__singleHopPhotonsObj=n,t.graphScene.add(n)}var r=je(t.linkDirectionalParticleWidth),o=Math.ceil(10*r(e))/10/2,i=t.linkDirectionalParticleResolution,a=new pn.SphereBufferGeometry(o,i,i),u=je(t.linkColor),s=je(t.linkDirectionalParticleColor)(e)||u(e)||"#f0f0f0",f=new pn.Color($e(s)),l=3*t.linkOpacity,c=new pn.MeshLambertMaterial({color:f,transparent:!0,opacity:l});e.__singleHopPhotonsObj.add(new pn.Mesh(a,c))}return this},getGraphBbox:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(!t.initialised)return null;var n=function t(n){var r=[];if(n.geometry){n.geometry.computeBoundingBox();var o=new pn.Box3;o.copy(n.geometry.boundingBox).applyMatrix4(n.matrixWorld),r.push(o)}return r.concat.apply(r,y((n.children||[]).filter((function(t){return!t.hasOwnProperty("__graphObjType")||"node"===t.__graphObjType&&e(t.__data)})).map(t)))}(t.graphScene);return n.length?Object.assign.apply(Object,y(["x","y","z"].map((function(t){return r({},t,[Ne(n,(function(e){return e.min[t]})),ze(n,(function(e){return e.max[t]}))])})))):null}},stateInit:function(){return{d3ForceLayout:kt().force("link",Y()).force("charge",At()).force("center",m()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(t,e){e.graphScene=t},update:function(t,n){var o=function(t){return t.some((function(t){return n.hasOwnProperty(t)}))};if(t.engineRunning=!1,t.onUpdate(),null!==t.nodeAutoColorBy&&o(["nodeAutoColorBy","graphData","nodeColor"])&&Je(t.graphData.nodes,je(t.nodeAutoColorBy),t.nodeColor),null!==t.linkAutoColorBy&&o(["linkAutoColorBy","graphData","linkColor"])&&Je(t.graphData.links,je(t.linkAutoColorBy),t.linkColor),t._flushObjects||o(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var i=je(t.nodeThreeObject),a=je(t.nodeThreeObjectExtend),u=je(t.nodeVal),s=je(t.nodeColor),f=je(t.nodeVisibility),l={},c={};He(t.graphData.nodes.filter(f),t.graphScene,{purge:t._flushObjects||o(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(t){return"node"===t.__graphObjType},createObj:function(e){var n,r=i(e),o=a(e);return r&&t.nodeThreeObject===r&&(r=r.clone()),r&&!o?n=r:((n=new pn.Mesh).__graphDefaultObj=!0,r&&o&&n.add(r)),n.__graphObjType="node",n},updateObj:function(e,n){if(e.__graphDefaultObj){var r=u(n)||1,o=Math.cbrt(r)*t.nodeRelSize,i=t.nodeResolution;"SphereBufferGeometry"===e.geometry.type&&e.geometry.parameters.radius===o&&e.geometry.parameters.widthSegments===i||(l.hasOwnProperty(r)||(l[r]=new pn.SphereBufferGeometry(o,i,i)),e.geometry.dispose(),e.geometry=l[r]);var a=s(n),f=new pn.Color($e(a||"#ffffaa")),h=t.nodeOpacity*Qe(a);"MeshLambertMaterial"===e.material.type&&e.material.color.equals(f)&&e.material.opacity===h||(c.hasOwnProperty(a)||(c[a]=new pn.MeshLambertMaterial({color:f,transparent:!0,opacity:h})),e.material.dispose(),e.material=c[a])}}})}if(t._flushObjects||o(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var h=je(t.linkThreeObject),d=je(t.linkThreeObjectExtend),p=je(t.linkMaterial),v=je(t.linkVisibility),b=je(t.linkColor),m=je(t.linkWidth),x={},_={},w={},k=t.graphData.links.filter(v);if(He(k,t.graphScene,{objBindAttr:"__lineObj",purge:t._flushObjects||o(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(t){return"link"===t.__graphObjType},createObj:function(e){var n,r,o=h(e),i=d(e);if(o&&t.linkThreeObject===o&&(o=o.clone()),!o||i)if(m(e))n=new pn.Mesh;else{var a=new pn.BufferGeometry;a[yn]("position",new pn.BufferAttribute(new Float32Array(6),3)),n=new pn.Line(a)}return o?i?((r=new pn.Group).__graphDefaultObj=!0,r.add(n),r.add(o)):r=o:(r=n).__graphDefaultObj=!0,r.renderOrder=10,r.__graphObjType="link",r},updateObj:function(e,n){if(e.__graphDefaultObj){var r=e.children.length?e.children[0]:e,o=Math.ceil(10*m(n))/10,i=!!o;if(i){var a=o/2,u=t.linkResolution;if("CylinderBufferGeometry"!==r.geometry.type||r.geometry.parameters.radiusTop!==a||r.geometry.parameters.radialSegments!==u){if(!x.hasOwnProperty(o)){var s=new pn.CylinderBufferGeometry(a,a,1,u,1,!1);s[vn]((new pn.Matrix4).makeTranslation(0,.5,0)),s[vn]((new pn.Matrix4).makeRotationX(Math.PI/2)),x[o]=s}r.geometry.dispose(),r.geometry=x[o]}}var f=p(n);if(f)r.material=f;else{var l=b(n),c=new pn.Color($e(l||"#f0f0f0")),h=t.linkOpacity*Qe(l),d=i?"MeshLambertMaterial":"LineBasicMaterial";if(r.material.type!==d||!r.material.color.equals(c)||r.material.opacity!==h){var g=i?_:w;g.hasOwnProperty(l)||(g[l]=new pn[d]({color:c,transparent:h<1,opacity:h,depthWrite:h>=1})),r.material.dispose(),r.material=g[l]}}}}}),t.linkDirectionalArrowLength||n.hasOwnProperty("linkDirectionalArrowLength")){var A=je(t.linkDirectionalArrowLength),O=je(t.linkDirectionalArrowColor);He(k.filter(A),t.graphScene,{objBindAttr:"__arrowObj",objFilter:function(t){return"arrow"===t.__linkThreeObjType},createObj:function(){var t=new pn.Mesh(void 0,new pn.MeshLambertMaterial({transparent:!0}));return t.__linkThreeObjType="arrow",t},updateObj:function(e,n){var r=A(n),o=t.linkDirectionalArrowResolution;if("ConeBufferGeometry"!==e.geometry.type||e.geometry.parameters.height!==r||e.geometry.parameters.radialSegments!==o){var i=new pn.ConeBufferGeometry(.25*r,r,o);i.translate(0,r/2,0),i.rotateX(Math.PI/2),e.geometry.dispose(),e.geometry=i}e.material.color=new pn.Color(O(n)||b(n)||"#f0f0f0"),e.material.opacity=3*t.linkOpacity}})}if(t.linkDirectionalParticles||n.hasOwnProperty("linkDirectionalParticles")){var M=je(t.linkDirectionalParticles),j=je(t.linkDirectionalParticleWidth),z=je(t.linkDirectionalParticleColor),N={},P={};He(k.filter(M),t.graphScene,{objBindAttr:"__photonsObj",objFilter:function(t){return"photons"===t.__linkThreeObjType},createObj:function(){var t=new pn.Group;return t.__linkThreeObjType="photons",t},updateObj:function(e,n){var r,o=Math.round(Math.abs(M(n))),i=!!e.children.length&&e.children[0],a=Math.ceil(10*j(n))/10/2,u=t.linkDirectionalParticleResolution;i&&i.geometry.parameters.radius===a&&i.geometry.parameters.widthSegments===u?r=i.geometry:(P.hasOwnProperty(a)||(P[a]=new pn.SphereBufferGeometry(a,u,u)),r=P[a],i&&i.geometry.dispose());var s,f=z(n)||b(n)||"#f0f0f0",l=new pn.Color($e(f)),c=3*t.linkOpacity;i&&i.material.color.equals(l)&&i.material.opacity===c?s=i.material:(N.hasOwnProperty(f)||(N[f]=new pn.MeshLambertMaterial({color:l,transparent:!0,opacity:c})),s=N[f],i&&i.material.dispose()),He(y(new Array(o)).map((function(t,e){return{idx:e}})),e,{idAccessor:function(t){return t.idx},createObj:function(){return new pn.Mesh(r,s)},updateObj:function(t){t.geometry=r,t.material=s}})}})}}if(t._flushObjects=!1,o(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){t.engineRunning=!1,t.graphData.links.forEach((function(e){e.source=e[t.linkSource],e.target=e[t.linkTarget]}));var E,q="ngraph"!==t.forceEngine;if(q){(E=t.d3ForceLayout).stop().alpha(1).numDimensions(t.numDimensions).nodes(t.graphData.nodes);var S=t.d3ForceLayout.force("link");S&&S.id((function(e){return e[t.nodeId]})).links(t.graphData.links);var D=t.dagMode&&function(t,n){var o=t.nodes,i=t.links,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=a.nodeFilter,s=void 0===u?function(){return!0}:u,f=a.onLoopError,l=void 0===f?function(t){throw"Invalid DAG structure! Found cycle in node path: ".concat(t.join(" -> "),".")}:f,c={};o.forEach((function(t){return c[n(t)]={data:t,out:[],depth:-1,skip:!s(t)}})),i.forEach((function(t){var r=t.source,o=t.target,i=f(r),a=f(o);if(!c.hasOwnProperty(i))throw"Missing source node with id: ".concat(i);if(!c.hasOwnProperty(a))throw"Missing target node with id: ".concat(a);var u=c[i],s=c[a];function f(t){return"object"===e(t)?n(t):t}u.out.push(s)}));var h=[];p(Object.values(c));var d=Object.assign.apply(Object,[{}].concat(y(Object.entries(c).filter((function(t){return!g(t,2)[1].skip})).map((function(t){var e=g(t,2);return r({},e[0],e[1].depth)})))));return d;function p(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=0,i=t.length;o<i;o++){var a=t[o];if(-1!==e.indexOf(a)){var u=function(){var t=[].concat(y(e.slice(e.indexOf(a))),[a]).map((function(t){return n(t.data)}));return h.some((function(e){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}))||(h.push(t),l(t)),"continue"}();if("continue"===u)continue}r>a.depth&&(a.depth=r,p(a.out,[].concat(y(e),[a]),r+(a.skip?0:1)))}}}(t.graphData,(function(e){return e[t.nodeId]}),{nodeFilter:t.dagNodeFilter,onLoopError:t.onDagError||void 0}),C=Math.max.apply(Math,y(Object.values(D||[]))),T=t.dagLevelDistance||t.graphData.nodes.length/(C||1)*2*(-1!==["radialin","radialout"].indexOf(t.dagMode)?.7:1);if(t.dagMode){var L=function(e,n){return function(r){return e?(D[r[t.nodeId]]-C/2)*T*(n?-1:1):void 0}},B=L(-1!==["lr","rl"].indexOf(t.dagMode),"rl"===t.dagMode),I=L(-1!==["td","bu"].indexOf(t.dagMode),"td"===t.dagMode),R=L(-1!==["zin","zout"].indexOf(t.dagMode),"zout"===t.dagMode);t.graphData.nodes.filter(t.dagNodeFilter).forEach((function(t){t.fx=B(t),t.fy=I(t),t.fz=R(t)}))}t.d3ForceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(t.dagMode)?function(t,e,n,r){var o,i,a,u,s=H(.1);function f(t){for(var s=0,f=o.length;s<f;++s){var l=o[s],c=l.x-e||1e-6,h=(l.y||0)-n||1e-6,d=(l.z||0)-r||1e-6,p=Math.sqrt(c*c+h*h+d*d),g=(u[s]-p)*a[s]*t/p;l.vx+=c*g,i>1&&(l.vy+=h*g),i>2&&(l.vz+=d*g)}}function l(){if(o){var e,n=o.length;for(a=new Array(n),u=new Array(n),e=0;e<n;++e)u[e]=+t(o[e],e,o),a[e]=isNaN(u[e])?0:+s(o[e],e,o)}}return"function"!=typeof t&&(t=H(+t)),null==e&&(e=0),null==n&&(n=0),null==r&&(r=0),f.initialize=function(t,e){o=t,i=e,l()},f.strength=function(t){return arguments.length?(s="function"==typeof t?t:H(+t),l(),f):s},f.radius=function(e){return arguments.length?(t="function"==typeof e?e:H(+e),l(),f):t},f.x=function(t){return arguments.length?(e=+t,f):e},f.y=function(t){return arguments.length?(n=+t,f):n},f.z=function(t){return arguments.length?(r=+t,f):r},f}((function(e){var n=D[e[t.nodeId]]||-1;return("radialin"===t.dagMode?C-n:n)*T})).strength((function(e){return t.dagNodeFilter(e)?1:0})):null)}else{var F=gn.graph();t.graphData.nodes.forEach((function(e){F.addNode(e[t.nodeId])})),t.graphData.links.forEach((function(t){F.addLink(t.source,t.target)})),(E=gn["forcelayout"+(2===t.numDimensions?"":"3d")](F,t.ngraphPhysics||void 0)).graph=F}for(var U=0;U<t.warmupTicks&&!(q&&t.d3AlphaMin>0&&t.d3ForceLayout.alpha()<t.d3AlphaMin);U++)E[q?"tick":"step"]();t.layout=E,this.resetCountdown()}t.engineRunning=!0,t.onFinishUpdate()}}).stateInit,en=void 0===tn?function(){return{}}:tn,nn=Ke.props,rn=void 0===nn?{}:nn,on=Ke.methods,an=void 0===on?{}:on,un=Ke.aliases,sn=void 0===un?{}:un,fn=Ke.init,ln=void 0===fn?function(){}:fn,cn=Ke.update,hn=void 0===cn?function(){}:cn,dn=Object.keys(rn).map((function(t){return new Me(t,rn[t])})),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},en instanceof Function?en(t):en,{initialised:!1}),n={};function r(e){return o(e,t),i(),r}var o=function(t,n){ln.call(r,t,e,n),e.initialised=!0},i=Ae((function(){e.initialised&&(hn.call(r,e,n),n={})}),1);return dn.forEach((function(t){r[t.name]=function(t){var o=t.name,a=t.triggerUpdate,u=void 0!==a&&a,s=t.onChange,f=void 0===s?function(t,e){}:s,l=t.defaultVal,c=void 0===l?null:l;return function(t){var a=e[o];if(!arguments.length)return a;var s=void 0===t?c:t;return e[o]=s,f.call(r,s,e,a),!n.hasOwnProperty(o)&&(n[o]=a),u&&i(),r}}(t)})),Object.keys(an).forEach((function(t){r[t]=function(){for(var n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(n=an[t]).call.apply(n,[r,e].concat(i))}})),Object.entries(sn).forEach((function(t){var e=Oe(t,2),n=e[0],o=e[1];return r[n]=r[o]})),r.resetProps=function(){return dn.forEach((function(t){r[t.name](t.defaultVal)})),r},r.resetProps(),e._rerender=i,r}),(window.THREE?window.THREE:{Group:t.Group}).Group,!0)}));
